FROM node:7.2.1-alpine

# Install yarn latest stable
WORKDIR /opt
RUN apk add --no-cache curl
RUN curl -L -O https://github.com/yarnpkg/yarn/releases/download/v0.23.2/yarn-v0.23.2.tar.gz
RUN tar -xvf yarn-v0.23.2.tar.gz
RUN mv dist yarn
ENV PATH /opt/yarn/bin/:$PATH

ARG APP_HOME

RUN mkdir -p /usr/src/assets
WORKDIR /usr/src/assets

ADD .babelrc        /usr/src/assets/
ADD yarn.lock       /usr/src/assets/
ADD package.json    /usr/src/assets/
ADD tsconfig.json   /usr/src/assets/
ADD webpack.config/ /usr/src/assets/
ADD tslint.json     /usr/src/assets/

RUN yarn install

COPY ./assets /usr/src/assets/assets
